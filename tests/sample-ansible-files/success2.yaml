# Variables are used (db_password from vault).
# Tasks have name and use proper modules.
# become provided.
# No hardcoded secrets (password is templated).
# Play has hosts.

- name: Setup database server
  hosts: dbservers
  become: true
  # vars:
  #   db_password: "{{ vault_db_password }}"
  tasks:
    - name: Create database user
      mysql_user:
        name: dbuser
        password: "{{ db_password }}"
        priv: '*.*:ALL'
      become: true
